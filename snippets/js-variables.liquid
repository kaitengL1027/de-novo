{% capture js_variables %}

window.Shopify = window.Shopify || {};

{% comment %} /* # Theme settings
================================================== */ {% endcomment %}
window.Shopify.theme_settings = {};
window.Shopify.theme_settings.primary_locale = "{{ request.locale.primary }}";
window.Shopify.theme_settings.current_locale = "{{ request.locale.iso_code }}";
window.Shopify.theme_settings.shop_url = "{{ routes.root_url }}";

{% comment %} Newsletter {% endcomment %}
window.Shopify.theme_settings.newsletter_popup = {{ settings.newsletter_popup | json }};
window.Shopify.theme_settings.newsletter_popup_days = {{ settings.newsletter_popup_days | json }};
window.Shopify.theme_settings.newsletter_popup_mobile = {{ settings.newsletter_popup_mobile | json }};
window.Shopify.theme_settings.newsletter_popup_seconds = {{ settings.newsletter_popup_seconds | json }};

{% comment %} Search {% endcomment %}
window.Shopify.theme_settings.search_option = {{ settings.search_option | json }};
window.Shopify.theme_settings.search_items_to_display = {{ settings.search_to_display | json }};
window.Shopify.theme_settings.enable_autocomplete = {{ settings.enable_autocomplete | json }};

{% comment %} Product {% endcomment %}
window.Shopify.theme_settings.free_text = {{ settings.free_price_text | json }};

{% comment %} Product Form {% endcomment %}
window.Shopify.theme_settings.product_form_style = {{ settings.product_form_style  | json }};
window.Shopify.theme_settings.display_inventory_left = {{ settings.display_inventory_left  | json }};
window.Shopify.theme_settings.limit_quantity = {{ settings.limit_quantity  | json }};
window.Shopify.theme_settings.inventory_threshold = {{ settings.inventory_threshold  | json }};
window.Shopify.theme_settings.free_price_text = {{ settings.free_price_text  | json }};

{% comment %} Collection {% endcomment %}
window.Shopify.theme_settings.collection_swatches = {{ settings.collection_swatches | json }};
window.Shopify.theme_settings.collection_secondary_image = {{ settings.collection_secondary_image | json }};

{% comment %} Cart {% endcomment %}
window.Shopify.theme_settings.cart_action = {{ settings.cart_action | json }};
window.Shopify.theme_settings.collection_secondary_image = {{ settings.collection_secondary_image | json }};
window.Shopify.theme_settings.display_tos_checkbox = {{ settings.display_tos_checkbox  | json }};
window.Shopify.theme_settings.tos_richtext = {{ settings.tos_richtext  | json }};

{% comment %} /* # Translation
================================================== */ {% endcomment %}
window.Shopify.translation = window.Shopify.translation || {};

{% comment %} Newsletter {% endcomment %}
window.Shopify.translation.newsletter_success_text = "{{ 'general.newsletter_form.success_text' | t | strip_newlines | escape }}";

{% comment %} Layout {% endcomment %}
window.Shopify.translation.menu = "{{ 'layout.general.menu' | t | strip_newlines | escape }}";

{% comment %} Cart {% endcomment %}
window.Shopify.translation.agree_to_terms_warning = "{{ 'cart.general.agree_to_terms_warning' | t | strip_newlines | escape }}";
window.Shopify.translation.cart_discount = "{{ 'cart.general.discount' | t | strip_newlines | escape }}";
window.Shopify.translation.edit_cart = "{{ 'layout.general.edit_cart' | t | strip_newlines | escape }}";
window.Shopify.translation.add_to_cart_success = "{{ 'layout.general.add_to_cart_success' | t | strip_newlines | escape }}";
window.Shopify.translation.agree_to_terms_html = "{{ 'cart.general.agree_to_terms_html' | t | strip_newlines | escape }}";
window.Shopify.translation.checkout = "{{ 'layout.general.checkout' | t | strip_newlines | escape }}";
window.Shopify.translation.or = "{{ 'layout.general.or' | t | strip_newlines | escape }}";
window.Shopify.translation.continue_shopping = "{{ 'layout.general.continue_shopping' | t | strip_newlines | escape }}";

{% comment %} Product {% endcomment %}
window.Shopify.translation.product_add_to_cart_success = "{{ 'products.product.add_to_cart_success' | t | strip_newlines | escape }}";
window.Shopify.translation.product_add_to_cart = "{{ 'products.product.add_to_cart' | t | strip_newlines | escape }}";
window.Shopify.translation.product_notify_form_email = "{{ 'products.notify_form.email' | t | strip_newlines | escape }}";
window.Shopify.translation.product_notify_form_send = "{{ 'products.notify_form.send' | t | strip_newlines | escape }}";
window.Shopify.translation.items_left_count_one = "{{ 'products.product.items_left_count.one' | t | strip_newlines | escape }}";
window.Shopify.translation.items_left_count_other = "{{ 'products.product.items_left_count.other' | t | strip_newlines | escape }}";
window.Shopify.translation.product_sold_out = "{{ 'products.product.sold_out' | t | strip_newlines | escape }}";
window.Shopify.translation.product_unavailable = "{{ 'products.product.unavailable' | t | strip_newlines | escape }}";
window.Shopify.translation.product_notify_form_success = "{{ 'products.notify_form.post_success' | t | strip_newlines | escape }}";
window.Shopify.translation.product_from = "{{ 'products.general.from' | t | strip_newlines | escape }}";

{% comment %} Search {% endcomment %}
window.Shopify.translation.search = "{{ 'general.search.title' | t | strip_newlines | escape }}";
window.Shopify.translation.all_results = "{{ 'general.search.all_results_html'| t }}";
window.Shopify.translation.no_results = "{{ 'general.search.no_results' | t | escape }}";

{% comment %} /* # Currency
================================================== */ {% endcomment %}
Currency = window.Currency || {};

{% comment %} Currency {% endcomment %}
Currency.shop_currency = {{ shop.currency | strip_html | json }};
Currency.default_currency = {{ settings.default_currency | default: shop.currency | json }};
Currency.display_format = {{ settings.currency_format | json }};
Currency.money_format = {{ shop[settings.currency_format] | strip_html | json }};
Currency.money_format_no_currency = {{ shop.money_format | strip_html | json }};
Currency.money_format_currency = {{ shop.money_with_currency_format | strip_html | json }};
Currency.native_multi_currency = {% if shop.enabled_currencies.size > 1 %}true{% else %}false{% endif %};
Currency.shipping_calculator = {{ settings.show_shipping_calculator | json }};
Currency.iso_code = {{ cart.currency.iso_code | json }};
Currency.symbol = {{ cart.currency.symbol | json }};

{% comment %} /* # Media queries
================================================== */ {% endcomment %}
window.Shopify.media_queries = window.Shopify.media_queries || {};
window.Shopify.media_queries.small = window.matchMedia( "(max-width: 480px)" );
window.Shopify.media_queries.medium = window.matchMedia( "(max-width: 798px)" );
window.Shopify.media_queries.large = window.matchMedia( "(min-width: 799px)" );
window.Shopify.media_queries.larger = window.matchMedia( "(min-width: 960px)" );
window.Shopify.media_queries.xlarge = window.matchMedia( "(min-width: 1200px)" );
window.Shopify.media_queries.ie10 = window.matchMedia( "all and (-ms-high-contrast: none), (-ms-high-contrast: active)" );
window.Shopify.media_queries.tablet = window.matchMedia( "only screen and (min-width: 799px) and (max-width: 1024px)" );

{% comment %} /* # Routes
================================================== */ {% endcomment %}
window.Shopify.routes = window.Shopify.routes || {};
window.Shopify.routes.root_url = "{{ routes.root_url }}";
window.Shopify.routes.search_url = "{{ routes.search_url }}";
window.Shopify.routes.cart_url = "{{ routes.cart_url }}";

{% endcapture %}
{%- assign js_variables = js_variables | split: 'Shopify.' -%}
{%- for variable in js_variables -%}{%- assign variableblock = variable | strip -%}{% if forloop.first %}{{ variableblock }}{% else %}{{ variableblock | prepend: 'Shopify.' }}{% endif %}{%- endfor -%}
